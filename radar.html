 <!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AUCTORIS ‚Äî Radar Sancionador</title>

<style>
:root{
  --bg0:#060b14;
  --bg1:#0a1324;
  --panel:#0e1b34;
  --ink:#eef3ff;
  --muted:#b9c6e6;
  --line:rgba(255,255,255,.10);
  --accent:#7aa7ff;
  --accent-soft:#b6ccff;
  --warn:#ffd27d;
  --risk:#ff7a7a;
  --ok:#63e6b5;
  --radius:20px;
  --shadow:0 24px 70px rgba(0,0,0,.55);
  --sans:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  --mono:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--sans);
  color:var(--ink);
  background:
    radial-gradient(1200px 600px at 70% 8%, rgba(122,167,255,.18), transparent 55%),
    radial-gradient(900px 600px at 20% 90%, rgba(122,167,255,.10), transparent 60%),
    linear-gradient(180deg,var(--bg0),var(--bg1) 55%,var(--bg0));
}

/* GRID SUTIL */
.gridFX{
  position:fixed; inset:0; pointer-events:none; opacity:.35;
  background-image:
    linear-gradient(to right, rgba(255,255,255,.04) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,.035) 1px, transparent 1px);
  background-size:64px 64px;
  mask-image:radial-gradient(ellipse at 50% 18%, black 35%, transparent 70%);
}

/* TOPBAR */
.topbar{
  position:sticky; top:0; z-index:40;
  backdrop-filter:blur(12px);
  background:rgba(6,11,20,.85);
  border-bottom:1px solid var(--line);
}
.topbar .inner{
  max-width:1200px;
  margin:0 auto;
  padding:14px 18px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
}
.brand{display:flex;flex-direction:column}
.brand strong{
  font-size:12px;
  letter-spacing:.28em;
  text-transform:uppercase;
}
.brand span{
  font-size:12px;
  color:var(--muted);
}
.nav a{
  margin-left:18px;
  font-size:12px;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:var(--accent-soft);
  text-decoration:none;
  border-bottom:1px solid rgba(122,167,255,.35);
}
.nav a:hover{border-bottom-color:rgba(122,167,255,.9)}

/* CONTAINER */
.wrap{
  max-width:1200px;
  margin:0 auto;
  padding:30px 18px 110px;
}

/* HERO */
.hero{
  border-radius:var(--radius);
  border:1px solid var(--line);
  background:linear-gradient(135deg, rgba(122,167,255,.22), rgba(14,27,52,.85) 55%);
  box-shadow:var(--shadow);
  padding:38px;
}
.hero .kicker{
  font-family:var(--mono);
  font-size:12px;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:rgba(255,255,255,.75);
}
.hero h1{
  margin:14px 0 10px;
  font-size:38px;
  line-height:1.15;
  font-weight:900;
}
.hero h1 em{color:var(--accent);font-style:normal}
.hero p{
  margin:0;
  max-width:75ch;
  font-size:16px;
  line-height:1.7;
  color:var(--muted);
}

/* STATUS */
.statusBar{
  margin-top:26px;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:18px;
}
@media(max-width:900px){ .statusBar{grid-template-columns:1fr} }
.status{
  border:1px solid var(--line);
  border-radius:18px;
  padding:20px;
  background:rgba(255,255,255,.04);
}
.status b{
  display:block;
  font-size:14px;
  letter-spacing:.06em;
  margin-bottom:6px;
}
.status span{
  font-size:13px;
  color:var(--muted);
}
.dot{
  width:10px;height:10px;border-radius:50%;
  display:inline-block;margin-right:8px;
}

/* SE√á√ïES */
.section{ margin-top:40px; }
.section h2{
  margin:0 0 18px;
  font-size:22px;
  letter-spacing:.04em;
}

/* KPI */
.kpis{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:18px;
}
@media(max-width:1000px){ .kpis{grid-template-columns:repeat(2,1fr)} }
@media(max-width:560px){ .kpis{grid-template-columns:1fr} }
.kpi{
  border-radius:20px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.035);
  padding:22px;
}
.kpi label{
  font-size:12px;
  letter-spacing:.14em;
  text-transform:uppercase;
  color:var(--muted);
}
.kpi strong{
  display:block;
  margin-top:8px;
  font-size:18px;
}
.kpi p{
  margin:6px 0 0;
  font-size:13px;
  color:var(--muted);
}

/* TEXTO */
.textBox{
  border-radius:22px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.035);
  padding:26px;
}
.textBox p{
  margin:0;
  font-size:15px;
  line-height:1.75;
  color:var(--muted);
}

/* FOOTER NAV */
.footerNav{
  margin-top:46px;
  border-top:1px solid var(--line);
  padding-top:22px;
  display:flex;
  justify-content:space-between;
  gap:18px;
  flex-wrap:wrap;
}
.footerNav a{
  font-size:12px;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:var(--accent-soft);
  text-decoration:none;
  border-bottom:1px solid rgba(122,167,255,.35);
}
.footerNav a:hover{border-bottom-color:rgba(122,167,255,.9)}
.footerNote{
  margin-top:14px;
  font-size:12px;
  color:rgba(255,255,255,.65);
  max-width:80ch;
}

/* ============================
   ASSISTENTE (CLONE DO INDEX)
   ============================ */

/* CHAT BOT */
.chatBot{
  position:fixed;
  bottom:28px;
  right:28px;
  z-index:100;
}
.chatBubble{
  width:72px;
  height:72px;
  border-radius:50%;
  background:linear-gradient(135deg, rgba(122,167,255,.30), rgba(99,230,181,.20));
  border:2px solid rgba(122,167,255,.48);
  box-shadow:0 8px 32px rgba(0,0,0,.35);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all .3s ease;
  position:relative;
}
.chatBubble:hover{
  transform:scale(1.08) translateY(-3px);
  box-shadow:0 12px 40px rgba(122,167,255,.45);
}
.chatBubble svg{
  width:38px;
  height:38px;
  fill:var(--ink);
  filter:drop-shadow(0 2px 4px rgba(0,0,0,.2));
}
.chatPulse{
  position:absolute;
  inset:0;
  border-radius:50%;
  border:2px solid rgba(122,167,255,.65);
  animation:pulse 2s infinite;
}
@keyframes pulse{
  0%{transform:scale(1);opacity:1}
  100%{transform:scale(1.4);opacity:0}
}

.chatWindow{
  position:fixed;
  bottom:115px;
  right:28px;
  width:420px;
  max-width:calc(100vw - 56px);
  max-height:calc(100vh - 160px);
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:24px;
  box-shadow:var(--shadow);
  opacity:0;
  transform:translateY(20px) scale(.95);
  pointer-events:none;
  transition:all .3s cubic-bezier(.4,0,.2,1);
  overflow:hidden;
  display:flex;
  flex-direction:column;
}
.chatWindow.active{
  opacity:1;
  transform:translateY(0) scale(1);
  pointer-events:all;
}

.chatHeader{
  padding:20px 22px;
  background:linear-gradient(135deg, rgba(122,167,255,.16), rgba(99,230,181,.08));
  border-bottom:1px solid var(--line);
  display:flex;
  align-items:center;
  gap:14px;
}
.chatAvatar{
  width:48px;
  height:48px;
  border-radius:50%;
  background:linear-gradient(135deg, rgba(122,167,255,.25), rgba(99,230,181,.16));
  border:2px solid rgba(122,167,255,.35);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
}
.chatAvatar svg{
  width:26px;
  height:26px;
  fill:var(--ink);
}
.chatHeaderText h3{
  margin:0;
  font-size:16px;
  font-weight:800;
  letter-spacing:.04em;
}
.chatHeaderText p{
  margin:4px 0 0;
  font-size:12px;
  color:var(--muted);
}
.chatClose{
  margin-left:auto;
  width:32px;
  height:32px;
  border:none;
  background:rgba(255,255,255,.05);
  border-radius:8px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all .2s ease;
  color:var(--muted);
  font-size:20px;
  line-height:1;
}
.chatClose:hover{
  background:rgba(255,122,122,.20);
  color:var(--risk);
}

.chatBody{
  padding:24px;
  overflow-y:auto;
  flex:1;
}
.chatMessage{
  margin-bottom:20px;
  animation:fadeIn .4s ease;
}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}
.chatMessage.bot{
  display:flex;
  gap:12px;
}
.chatMessageAvatar{
  width:32px;
  height:32px;
  border-radius:50%;
  background:linear-gradient(135deg, rgba(122,167,255,.20), rgba(99,230,181,.14));
  border:1px solid rgba(122,167,255,.30);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
}
.chatMessageAvatar svg{
  width:18px;
  height:18px;
  fill:var(--ink);
}
.chatMessageContent{flex:1}
.chatBubbleText{
  background:rgba(255,255,255,.05);
  border:1px solid var(--line);
  border-radius:16px;
  padding:14px 16px;
  font-size:14px;
  line-height:1.6;
  color:var(--ink);
}

.chatOptions{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top:14px;
}
.chatOption{
  background:rgba(255,255,255,.04);
  border:1px solid var(--line);
  border-radius:12px;
  padding:14px 16px;
  font-size:13px;
  line-height:1.5;
  cursor:pointer;
  transition:all .2s ease;
  display:flex;
  align-items:center;
  gap:10px;
}
.chatOption:hover{
  background:rgba(122,167,255,.12);
  border-color:rgba(122,167,255,.35);
  transform:translateX(4px);
}
.chatOption .emoji{
  font-size:20px;
  flex-shrink:0;
}
.chatOption .text{
  flex:1;
  color:var(--ink);
}

.chatRecommendation{
  margin-top:18px;
  padding:16px;
  background:linear-gradient(135deg, rgba(122,167,255,.16), rgba(99,230,181,.08));
  border:1px solid rgba(122,167,255,.30);
  border-radius:14px;
}
.chatRecommendation strong{
  display:block;
  font-size:13px;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:var(--accent);
  margin-bottom:8px;
}
.chatRecommendation p{
  margin:0 0 12px;
  font-size:13px;
  line-height:1.6;
  color:var(--ink);
}
.chatRecommendation a{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:10px 16px;
  background:rgba(122,167,255,.20);
  border:1px solid rgba(122,167,255,.35);
  border-radius:8px;
  font-size:12px;
  font-weight:700;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:var(--accent-soft);
  text-decoration:none;
  transition:all .2s ease;
}
.chatRecommendation a:hover{
  background:rgba(122,167,255,.28);
  transform:translateY(-2px);
}

.chatReset{
  margin-top:16px;
  text-align:center;
}
.chatReset button{
  background:rgba(255,255,255,.04);
  border:1px solid var(--line);
  border-radius:8px;
  padding:10px 18px;
  font-size:12px;
  font-weight:600;
  letter-spacing:.06em;
  color:var(--muted);
  cursor:pointer;
  transition:all .2s ease;
}
.chatReset button:hover{
  background:rgba(255,255,255,.08);
  color:var(--ink);
}

@media(max-width:980px){
  .chatBot{bottom:20px;right:20px}
  .chatBubble{width:64px;height:64px}
  .chatBubble svg{width:34px;height:34px}
  .chatWindow{bottom:100px;right:20px;width:calc(100vw - 40px)}
}
</style>
</head>

<body>
<div class="gridFX"></div>

<header class="topbar">
  <div class="inner">
    <div class="brand">
      <strong>AUCTORIS</strong>
      <span>Radar Sancionador ‚Äî leitura institucional</span>
    </div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="termometro.html">Voltar</a>
      <a href="radar-relatorio-2026-01.html">Avan√ßar</a>
    </nav>
  </div>
</header>

<main class="wrap">

<section class="hero">
  <div class="kicker">Radar sancionador ¬∑ leitura executiva</div>
  <h1>Radar Sancionador<br><em>padr√µes decis√≥rios e exposi√ß√£o institucional</em></h1>
  <p>
    O Radar organiza atos e decis√µes p√∫blicas para evidenciar recorr√™ncias sancionat√≥rias,
    sinais institucionais e padr√µes observ√°veis de exposi√ß√£o.
    N√£o avalia empresas, n√£o emite parecer e n√£o recomenda a√ß√µes.
  </p>

  <div class="statusBar">
    <div class="status">
      <b><span class="dot" style="background:var(--warn)"></span>Situa√ß√£o observada</b>
      <span>Estabilidade com intensifica√ß√£o seletiva</span>
    </div>
    <div class="status">
      <b><span class="dot" style="background:var(--risk)"></span>Recorr√™ncia</b>
      <span>Tempo de resposta, evid√™ncia e coer√™ncia narrativa</span>
    </div>
    <div class="status">
      <b><span class="dot" style="background:var(--ok)"></span>Padr√£o predominante</b>
      <span>Governan√ßa decis√≥ria demonstr√°vel</span>
    </div>
  </div>
</section>

<section class="section">
  <h2>Painel sint√©tico</h2>
  <div class="kpis">
    <div class="kpi">
      <label>Vetor cr√≠tico</label>
      <strong>Rastreabilidade</strong>
      <p>Registro consistente da decis√£o institucional.</p>
    </div>
    <div class="kpi">
      <label>Recorr√™ncia</label>
      <strong>Resposta tardia</strong>
      <p>Fragmenta√ß√£o temporal em eventos sens√≠veis.</p>
    </div>
    <div class="kpi">
      <label>Fator associado</label>
      <strong>Narrativa fr√°gil</strong>
      <p>Desalinhamento entre fato, registro e comunica√ß√£o.</p>
    </div>
    <div class="kpi">
      <label>Sinal dominante</label>
      <strong>Governan√ßa</strong>
      <p>Quem decide, quando decide e com qual lastro.</p>
    </div>
  </div>
</section>

<section class="section">
  <h2>Leitura institucional consolidada</h2>
  <div class="textBox">
    <p>
      Registra-se, em bases p√∫blicas, recorr√™ncia de enquadramentos que deslocam a leitura de um eixo exclusivamente t√©cnico
      para uma dimens√£o institucional mais ampla. Observam-se men√ß√µes consistentes a comando, coer√™ncia e preserva√ß√£o m√≠nima
      de evid√™ncias nas primeiras horas de eventos cr√≠ticos. A aus√™ncia desses sinais aparece associada, em registros e decis√µes,
      a intensifica√ß√£o de exposi√ß√£o e medidas sancionat√≥rias, independentemente de altera√ß√£o normativa formal.
    </p>
  </div>
</section>

<div class="footerNav">
  <a href="index.html">Home</a>
  <a href="termometro.html">Voltar ¬∑ Term√¥metro</a>
  <a href="radar-relatorio-2026-01.html">Avan√ßar ¬∑ Relat√≥rio</a>
</div>

<div class="footerNote">
  Conte√∫do demonstrativo (m√≥dulo-amostra), informativo e educacional, baseado exclusivamente em dados p√∫blicos.
  N√£o constitui parecer jur√≠dico, avalia√ß√£o de conformidade ou recomenda√ß√£o operacional.
  O Radar completo √© parametrizado por organiza√ß√£o e setor, com leitura ajustada ao arranjo decis√≥rio e ao perfil de exposi√ß√£o regulat√≥ria.
</div>

</main>

<!-- ASSISTENTE AUCTORIS (CLONE DO INDEX) -->
<div class="chatBot">
  <div class="chatBubble" id="chatToggle">
    <div class="chatPulse"></div>
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
      <circle cx="12" cy="8" r="1.5" fill="currentColor"/>
      <path d="M14.5 11c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-5 0c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z" opacity="0.5"/>
    </svg>
  </div>

  <div class="chatWindow" id="chatWindow">
    <div class="chatHeader">
      <div class="chatAvatar">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <circle cx="15.5" cy="9.5" r="1.5"/>
          <circle cx="8.5" cy="9.5" r="1.5"/>
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.7.33 1.47.33 2.26 0 4.41-3.59 8-8 8z"/>
          <path d="M12 17c-2.21 0-4-1.79-4-4h8c0 2.21-1.79 4-4 4z" opacity="0.5"/>
        </svg>
      </div>
      <div class="chatHeaderText">
        <h3>Assistente AUCTORIS</h3>
        <p>Navega√ß√£o institucional ¬∑ m√≥dulo-amostra</p>
      </div>
      <button class="chatClose" id="chatWindowClose">√ó</button>
    </div>

    <div class="chatBody" id="chatBody">
      <!-- Messages inserted by JS -->
    </div>
  </div>
</div>

<script>
/* ASSISTENTE ‚Äî CLONE DO INDEX (mesmo motor; fluxo adaptado ao Radar) */
const chatToggle = document.getElementById('chatToggle');
const chatWindow = document.getElementById('chatWindow');
const chatWindowClose = document.getElementById('chatWindowClose');
const chatBody = document.getElementById('chatBody');

let chatState = {
  started: false,
  currentStep: 'welcome',
  answers: {},
  lang: 'pt'
};

const chatFlows = {
  pt: {
    welcome: {
      message: "Radar Sancionador ‚Äî m√≥dulo demonstrativo.\nLeitura institucional de padr√µes decis√≥rios e exposi√ß√£o sancionat√≥ria com base em dados p√∫blicos.",
      question: "Selecione o direcionamento institucional:",
      options: [
        { id: 'navigate', emoji: 'üß≠', text: 'Navegar entre m√≥dulos', next: 'navigate' },
        { id: 'custom', emoji: 'üè¢', text: 'Radar completo por organiza√ß√£o e setor', next: 'custom' },
        { id: 'about', emoji: '‚úçÔ∏è', text: 'Autoria e contato institucional', next: 'about' }
      ]
    },

    navigate: {
      message: "Rotas dispon√≠veis no sistema AUCTORIS:",
      question: "Selecione o pr√≥ximo m√≥dulo:",
      options: [
        { id: 'home', emoji: 'üèõÔ∏è', text: 'P√°gina institucional', next: 'go_home' },
        { id: 'thermo', emoji: 'üìä', text: 'Term√¥metro Regulat√≥rio', next: 'go_thermo' },
        { id: 'report', emoji: 'üìÑ', text: 'Relat√≥rio Institucional', next: 'go_report' }
      ]
    },

    custom: {
      recommendation: {
        title: "Radar completo (parametriza√ß√£o institucional)",
        description:
          "A camada integral do Radar √© parametrizada por organiza√ß√£o, considerando setor regulado, arranjo decis√≥rio e perfil de exposi√ß√£o regulat√≥ria. A vers√£o p√∫blica permanece como amostra, sem leitura individualizada.",
        link: "mailto:guilhermersaraujo@proton.me",
        linkText: "Contato institucional ‚Üí"
      }
    },

    about: {
      recommendation: {
        title: "Autoria",
        description:
          "Guilherme Rafael de Souza Araujo ‚Äî advogado, professor, pesquisador independente e escritor. Leitura regulat√≥ria, padr√µes sancionat√≥rios e coer√™ncia decis√≥ria para diretoria, conselho e seguradoras.",
        link: "mailto:guilhermersaraujo@proton.me",
        linkText: "guilhermersaraujo@proton.me ‚Üí"
      }
    },

    go_home: {
      recommendation: {
        title: "P√°gina institucional",
        description: "Vis√£o geral do sistema AUCTORIS e do portf√≥lio de m√≥dulos.",
        link: "index.html",
        linkText: "Ir para Home ‚Üí"
      }
    },

    go_thermo: {
      recommendation: {
        title: "Term√¥metro Regulat√≥rio",
        description: "Leitura p√∫blica e cont√≠nua do ambiente regulat√≥rio, com atualiza√ß√£o mensal.",
        link: "termometro.html",
        linkText: "Acessar Term√¥metro ‚Üí"
      }
    },

    go_report: {
      recommendation: {
        title: "Relat√≥rio Institucional",
        description: "Leitura aprofundada e estruturada. Acesso controlado por organiza√ß√£o.",
        link: "radar-relatorio-2026-01.html",
        linkText: "Acessar Relat√≥rio ‚Üí"
      }
    }
  }
};

function addBotMessage(message, options = null, recommendation = null) {
  const messageDiv = document.createElement('div');
  messageDiv.className = 'chatMessage bot';

  let safeMessage = (message || "").replace(/\n/g,'<br>');

  let html = `
    <div class="chatMessageAvatar">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <circle cx="15.5" cy="9.5" r="1.5"/>
        <circle cx="8.5" cy="9.5" r="1.5"/>
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.7.33 1.47.33 2.26 0 4.41-3.59 8-8 8z"/>
      </svg>
    </div>
    <div class="chatMessageContent">
      <div class="chatBubbleText">${safeMessage}</div>
  `;

  if (options) {
    html += '<div class="chatOptions">';
    options.forEach(opt => {
      html += `
        <div class="chatOption" data-next="${opt.next}">
          <span class="emoji">${opt.emoji}</span>
          <span class="text">${opt.text}</span>
        </div>
      `;
    });
    html += '</div>';
  }

  if (recommendation) {
    html += `
      <div class="chatRecommendation">
        <strong>${recommendation.title}</strong>
        <p>${recommendation.description}</p>
        <a href="${recommendation.link}">${recommendation.linkText}</a>
      </div>
      <div class="chatReset">
        <button type="button" onclick="resetChat()">Reiniciar</button>
      </div>
    `;
  }

  html += '</div></div>';
  messageDiv.innerHTML = html;

  chatBody.appendChild(messageDiv);
  chatBody.scrollTop = chatBody.scrollHeight;

  if (options) {
    messageDiv.querySelectorAll('.chatOption').forEach(opt => {
      opt.addEventListener('click', () => handleOption(opt.dataset.next));
    });
  }
}

function handleOption(next) {
  const flow = chatFlows.pt;
  const step = flow[next];

  if (!step) return;

  if (step.recommendation) {
    addBotMessage(" ", null, step.recommendation);
  } else {
    setTimeout(() => {
      addBotMessage(step.message || "");
      setTimeout(() => {
        if (step.question) {
          addBotMessage(step.question, step.options || null);
        } else if (step.options) {
          addBotMessage("Selecione uma op√ß√£o:", step.options);
        }
      }, 350);
    }, 220);
  }

  chatState.currentStep = next;
}

function startChat() {
  chatState.started = true;
  const flow = chatFlows.pt;
  addBotMessage(flow.welcome.message);
  setTimeout(() => {
    addBotMessage(flow.welcome.question, flow.welcome.options);
  }, 500);
}

function resetChat() {
  chatBody.innerHTML = '';
  chatState = { started:false, currentStep:'welcome', answers:{}, lang:'pt' };
  startChat();
}

chatToggle.addEventListener('click', () => {
  chatWindow.classList.add('active');
  if (!chatState.started) startChat();
});

chatWindowClose.addEventListener('click', () => {
  chatWindow.classList.remove('active');
});

document.addEventListener('click', (e) => {
  if (!chatWindow.contains(e.target) && !chatToggle.contains(e.target)) {
    chatWindow.classList.remove('active');
  }
});
</script>

</body>
</html>


